<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>ADMIN KEY</title>
<style>
body{background:#000;color:#00ff66;font-family:monospace}
.box{max-width:420px;margin:auto;border:2px solid #00ff66;padding:12px}
input,select,button{width:100%;padding:10px;margin:6px 0;background:#000;color:#00ff66;border:1px solid #00ff66}
.key{display:flex;justify-content:space-between;margin:4px 0}
</style>
</head>
<body>

<div class="box">
<h3>üîë ADMIN KEY</h3>

<input id="key" placeholder="Key">
<select id="type">
<option value="FREE">FREE (1 DAY)</option>
<option value="VIP">VIP (Vƒ®NH VI·ªÑN)</option>
</select>
<button onclick="createKey()">‚ûï T·∫†O KEY</button>

<div id="list"></div>
</div>

<script>
const SERVER="https://admin-key-server.onrender.com";

async function loadKeys(){
  const res = await fetch(SERVER+"/admin/keys");
  const data = await res.json();
  let html="";
  Object.keys(data).forEach(k=>{
    const e=data[k].expire?new Date(data[k].expire).toLocaleString():"Vƒ®NH VI·ªÑN";
    html+=`
      <div class="key">
        <span>${k} (${data[k].type})<br><small>${e}</small></span>
        <button onclick="delKey('${k}')">‚ùå</button>
      </div>`;
  });
  list.innerHTML=html||"Ch∆∞a c√≥ key";
}

async function createKey(){
  await fetch(SERVER+"/admin/create",{
    method:"POST",
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({key:key.value,type:type.value})
  });
  key.value="";
  loadKeys();
}

async function delKey(k){
  await fetch(SERVER+"/admin/delete",{
    method:"POST",
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({key:k})
  });
  loadKeys();
}
loadKeys();
</script>
</body>
</html>