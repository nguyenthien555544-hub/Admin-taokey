<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>ADMIN KEY PANEL</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{background:#000;color:#00ff66;font-family:monospace}
.box{max-width:420px;margin:auto;border:2px solid #00ff66;padding:12px}
input,select,button{width:100%;padding:10px;margin:6px 0;background:#000;color:#00ff66;border:1px solid #00ff66}
.list{border:1px dashed #00ff66;padding:8px;margin-top:10px;font-size:13px}
.key{display:flex;flex-direction:column;border-bottom:1px dashed #00ff66;margin-bottom:6px;padding-bottom:6px}
small{opacity:.8}
button.del{border-color:#ff4444;color:#ff4444;margin-top:4px}
</style>
</head>
<body>

<div class="box">
<h3>üîê ADMIN KEY PANEL</h3>

<input id="key" placeholder="Key (VD: GA123VIP)">
<input id="device" placeholder="Device ID (DEV-xxxx)">
<select id="type">
<option value="FREE">FREE (1 DAY)</option>
<option value="VIP">VIP (Vƒ®NH VI·ªÑN)</option>
</select>

<button onclick="createKey()">‚ûï T·∫†O KEY</button>

<div class="list" id="list">Loading...</div>
</div>

<script>
const SERVER="https://admin-key-server.onrender.com";

/* LOAD KEYS */
async function loadKeys(){
 const res=await fetch(SERVER+"/admin/keys");
 const data=await res.json();
 let html="";
 Object.keys(data).forEach(k=>{
  const v=data[k];
  html+=`
  <div class="key">
   <b>${k} (${v.type})</b>
   <small>üì± Device: ${v.device||"ALL"}</small>
   <small>‚è≥ Expire: ${v.expire?new Date(v.expire).toLocaleString():"Vƒ®NH VI·ªÑN"}</small>
   <button class="del" onclick="delKey('${k}')">‚ùå X√ìA</button>
  </div>`;
 });
 list.innerHTML=html||"Ch∆∞a c√≥ key";
}

/* CREATE KEY */
async function createKey(){
 if(!key.value||!device.value) return alert("Thi·∫øu key ho·∫∑c device");
 const res=await fetch(SERVER+"/admin/create",{
  method:"POST",
  headers:{'Content-Type':'application/json'},
  body:JSON.stringify({
   key:key.value,
   type:type.value,
   device:device.value
  })
 });
 const d=await res.json();
 if(!d.ok) return alert(d.msg);
 key.value="";device.value="";
 loadKeys();
}

/* DELETE */
async function delKey(k){
 if(!confirm("X√≥a key "+k+"?"))return;
 await fetch(SERVER+"/admin/delete",{
  method:"POST",
  headers:{'Content-Type':'application/json'},
  body:JSON.stringify({key:k})
 });
 loadKeys();
}

loadKeys();
</script>
</body>
</html>